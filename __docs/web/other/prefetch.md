

# 资源预加载


preload、prefetch和preconnect都是用于优化页面访问速度的，有趣的是它们都是以 `pre` 开头的，`pre` 这个单词前缀一般都表示预先怎么怎么样。这里也不例外，preload表示预先加载，prefetch表示预先获取，而preconnect呢就表示预先建立连接。下面我们一个个的来详细说一下。

# Preload

preload表示预先加载，它主要是针对于当前页面来使用的。

```html
<link ref="preload" href="vendor.js">
```

# Prefetch
Prefetch包含三种不同类型的Prefetch，它们主要针对的是即将访问到的下一个页面，对用户即将进入的下一个页面的资源进行预获取。当然，这个获取的过程肯定是需要在当前页面的资源已经加载完成，处于空闲状态的时候去做。这样就利用了浏览器空闲的间隙让下一页的资源先被缓存到本地，当你进入下一页的时候，这些资源就已经存在于本地资源了，效率自然会提高很多。

## prefetch
标准的prefetch，在进程空闲的时候就去下载这里声明的文件，为下一步做好准备。比如预先获取一些javascript脚本或者图片，这样你在进入下一个界面的时候，就不需要再花时间等待下载了，它早就预先获取到并存在于本地内存中了。

```html
<link ref="prefetch" href="vendor.js">
```

## dns-prefetch

我们都知道当你访问某个网站时候是会有一个查询DNS的过程，也就是根据你输入的url通过DNS服务器查询到对应的主机IP。这个过程也有一定的时间消耗，dns-prefetch就是让你能在空闲的时候预先就去做这个DNS查询的操作，省掉这一部分时间。

```html
<link ref="dns-prefetch" href="https://cdn.example.com">
```


## prerender

prerender就更强了， 不是针对下一页要用到的某些资源进行预获取，而是直接把下一页以及下一页所要使用到的所有资源都先获取下来，然后在内存中先渲染完成，等到你进入下一页的时候，直接绘制就行了，省去了大量的时间消耗。手机上的UC浏览器中看小说的时候会自动获取下一页，你翻页的时候和在本地浏览书籍感觉一样，无缝衔接，但是你在用搜索引擎搜索一个东西的时候它就会有加载进度条了。

```html
<link ref="prerender" href="">
```

# preconnect
在浏览器中当我们访问一个地址获取资源的时候一般是通过http或者https协议，这两个协议属于应用层的协议，它的下一层中实际是需要建立一个TCP连接的，我们每访问一个资源，就需要建立一次，用完就断开。那如果我知道接下来我要访问的很多资源都是需要从某个地址获取的，这时候是不是就可以预先建立好这样一个TCP连接，做好准备呢？preconnect就是做的这样一件事儿。

```html
<link ref="preconnect" href="">
```

# 总结
其实这几个操作无非都是预先去做一些事儿，为接下来要实际使用的时候做好准备，减少时间和资源的消耗。

